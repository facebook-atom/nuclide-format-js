'use strict';

var _addLeadingComments = require('./addLeadingComments');

var _addLeadingComments2 = _interopRequireDefault(_addLeadingComments);

var _addMissingRequires = require('./addMissingRequires');

var _addMissingRequires2 = _interopRequireDefault(_addMissingRequires);

var _addMissingTypes = require('./addMissingTypes');

var _addMissingTypes2 = _interopRequireDefault(_addMissingTypes);

var _formatRequires = require('./formatRequires');

var _formatRequires2 = _interopRequireDefault(_formatRequires);

var _removeLeadingComments = require('./removeLeadingComments');

var _removeLeadingComments2 = _interopRequireDefault(_removeLeadingComments);

var _removeUnusedRequires = require('./removeUnusedRequires');

var _removeUnusedRequires2 = _interopRequireDefault(_removeUnusedRequires);

var _removeUnusedTypes = require('./removeUnusedTypes');

var _removeUnusedTypes2 = _interopRequireDefault(_removeUnusedTypes);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * This is the collection of transforms that affect requires.
 */
/*
 * Copyright (c) 2015-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the license found in the LICENSE file in
 * the root directory of this source tree.
 *
 * 
 */

function transform(root, options) {
  var blacklist = options.blacklist || new Set();
  var comments = void 0;
  if (!blacklist.has('requires.transferComments')) {
    comments = (0, _removeLeadingComments2.default)(root);
  }
  if (!blacklist.has('requires.removeUnusedRequires')) {
    (0, _removeUnusedRequires2.default)(root, options);
  }
  if (!blacklist.has('requires.addMissingRequires')) {
    (0, _addMissingRequires2.default)(root, options);
  }
  if (!blacklist.has('requires.removeUnusedTypes')) {
    (0, _removeUnusedTypes2.default)(root, options);
  }
  if (!blacklist.has('requires.addMissingTypes')) {
    (0, _addMissingTypes2.default)(root, options);
  }
  if (!blacklist.has('requires.formatRequires')) {
    (0, _formatRequires2.default)(root, options);
  }
  if (!blacklist.has('requires.transferComments')) {
    (0, _addLeadingComments2.default)(root, comments);
  }
}

module.exports = transform;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tb24vcmVxdWlyZXMvdHJhbnNmb3JtLmpzIl0sIm5hbWVzIjpbInRyYW5zZm9ybSIsInJvb3QiLCJvcHRpb25zIiwiYmxhY2tsaXN0IiwiU2V0IiwiY29tbWVudHMiLCJoYXMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQWNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQTs7O0FBdEJBOzs7Ozs7Ozs7O0FBeUJBLFNBQVNBLFNBQVQsQ0FBbUJDLElBQW5CLEVBQXFDQyxPQUFyQyxFQUFtRTtBQUNqRSxNQUFNQyxZQUErQkQsUUFBUUMsU0FBUixJQUFxQixJQUFJQyxHQUFKLEVBQTFEO0FBQ0EsTUFBSUMsaUJBQUo7QUFDQSxNQUFJLENBQUNGLFVBQVVHLEdBQVYsQ0FBYywyQkFBZCxDQUFMLEVBQWlEO0FBQy9DRCxlQUFXLHFDQUFzQkosSUFBdEIsQ0FBWDtBQUNEO0FBQ0QsTUFBSSxDQUFDRSxVQUFVRyxHQUFWLENBQWMsK0JBQWQsQ0FBTCxFQUFxRDtBQUNuRCx3Q0FBcUJMLElBQXJCLEVBQTJCQyxPQUEzQjtBQUNEO0FBQ0QsTUFBSSxDQUFDQyxVQUFVRyxHQUFWLENBQWMsNkJBQWQsQ0FBTCxFQUFtRDtBQUNqRCxzQ0FBbUJMLElBQW5CLEVBQXlCQyxPQUF6QjtBQUNEO0FBQ0QsTUFBSSxDQUFDQyxVQUFVRyxHQUFWLENBQWMsNEJBQWQsQ0FBTCxFQUFrRDtBQUNoRCxxQ0FBa0JMLElBQWxCLEVBQXdCQyxPQUF4QjtBQUNEO0FBQ0QsTUFBSSxDQUFDQyxVQUFVRyxHQUFWLENBQWMsMEJBQWQsQ0FBTCxFQUFnRDtBQUM5QyxtQ0FBZ0JMLElBQWhCLEVBQXNCQyxPQUF0QjtBQUNEO0FBQ0QsTUFBSSxDQUFDQyxVQUFVRyxHQUFWLENBQWMseUJBQWQsQ0FBTCxFQUErQztBQUM3QyxrQ0FBZUwsSUFBZixFQUFxQkMsT0FBckI7QUFDRDtBQUNELE1BQUksQ0FBQ0MsVUFBVUcsR0FBVixDQUFjLDJCQUFkLENBQUwsRUFBaUQ7QUFDL0Msc0NBQW1CTCxJQUFuQixFQUF5QkksUUFBekI7QUFDRDtBQUNGOztBQUVERSxPQUFPQyxPQUFQLEdBQWlCUixTQUFqQiIsImZpbGUiOiJ0cmFuc2Zvcm0uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIGxpY2Vuc2UgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpblxuICogdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqL1xuXG5pbXBvcnQgdHlwZSB7Q29sbGVjdGlvbn0gZnJvbSAnLi4vdHlwZXMvYXN0JztcbmltcG9ydCB0eXBlIHtTb3VyY2VPcHRpb25zfSBmcm9tICcuLi9vcHRpb25zL1NvdXJjZU9wdGlvbnMnO1xuaW1wb3J0IHR5cGUge1RyYW5zZm9ybUtleX0gZnJvbSAnLi4vdHlwZXMvdHJhbnNmb3Jtcyc7XG5cbmltcG9ydCBhZGRMZWFkaW5nQ29tbWVudHMgZnJvbSAnLi9hZGRMZWFkaW5nQ29tbWVudHMnO1xuaW1wb3J0IGFkZE1pc3NpbmdSZXF1aXJlcyBmcm9tICcuL2FkZE1pc3NpbmdSZXF1aXJlcyc7XG5pbXBvcnQgYWRkTWlzc2luZ1R5cGVzIGZyb20gJy4vYWRkTWlzc2luZ1R5cGVzJztcbmltcG9ydCBmb3JtYXRSZXF1aXJlcyBmcm9tICcuL2Zvcm1hdFJlcXVpcmVzJztcbmltcG9ydCByZW1vdmVMZWFkaW5nQ29tbWVudHMgZnJvbSAnLi9yZW1vdmVMZWFkaW5nQ29tbWVudHMnO1xuaW1wb3J0IHJlbW92ZVVudXNlZFJlcXVpcmVzIGZyb20gJy4vcmVtb3ZlVW51c2VkUmVxdWlyZXMnO1xuaW1wb3J0IHJlbW92ZVVudXNlZFR5cGVzIGZyb20gJy4vcmVtb3ZlVW51c2VkVHlwZXMnO1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIGNvbGxlY3Rpb24gb2YgdHJhbnNmb3JtcyB0aGF0IGFmZmVjdCByZXF1aXJlcy5cbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtKHJvb3Q6IENvbGxlY3Rpb24sIG9wdGlvbnM6IFNvdXJjZU9wdGlvbnMpOiB2b2lkIHtcbiAgY29uc3QgYmxhY2tsaXN0OiBTZXQ8VHJhbnNmb3JtS2V5PiA9IG9wdGlvbnMuYmxhY2tsaXN0IHx8IG5ldyBTZXQoKTtcbiAgbGV0IGNvbW1lbnRzO1xuICBpZiAoIWJsYWNrbGlzdC5oYXMoJ3JlcXVpcmVzLnRyYW5zZmVyQ29tbWVudHMnKSkge1xuICAgIGNvbW1lbnRzID0gcmVtb3ZlTGVhZGluZ0NvbW1lbnRzKHJvb3QpO1xuICB9XG4gIGlmICghYmxhY2tsaXN0LmhhcygncmVxdWlyZXMucmVtb3ZlVW51c2VkUmVxdWlyZXMnKSkge1xuICAgIHJlbW92ZVVudXNlZFJlcXVpcmVzKHJvb3QsIG9wdGlvbnMpO1xuICB9XG4gIGlmICghYmxhY2tsaXN0LmhhcygncmVxdWlyZXMuYWRkTWlzc2luZ1JlcXVpcmVzJykpIHtcbiAgICBhZGRNaXNzaW5nUmVxdWlyZXMocm9vdCwgb3B0aW9ucyk7XG4gIH1cbiAgaWYgKCFibGFja2xpc3QuaGFzKCdyZXF1aXJlcy5yZW1vdmVVbnVzZWRUeXBlcycpKSB7XG4gICAgcmVtb3ZlVW51c2VkVHlwZXMocm9vdCwgb3B0aW9ucyk7XG4gIH1cbiAgaWYgKCFibGFja2xpc3QuaGFzKCdyZXF1aXJlcy5hZGRNaXNzaW5nVHlwZXMnKSkge1xuICAgIGFkZE1pc3NpbmdUeXBlcyhyb290LCBvcHRpb25zKTtcbiAgfVxuICBpZiAoIWJsYWNrbGlzdC5oYXMoJ3JlcXVpcmVzLmZvcm1hdFJlcXVpcmVzJykpIHtcbiAgICBmb3JtYXRSZXF1aXJlcyhyb290LCBvcHRpb25zKTtcbiAgfVxuICBpZiAoIWJsYWNrbGlzdC5oYXMoJ3JlcXVpcmVzLnRyYW5zZmVyQ29tbWVudHMnKSkge1xuICAgIGFkZExlYWRpbmdDb21tZW50cyhyb290LCBjb21tZW50cyk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0cmFuc2Zvcm07XG4iXX0=