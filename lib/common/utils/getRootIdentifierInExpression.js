'use strict';

var _jscodeshift = require('jscodeshift');

var _jscodeshift2 = _interopRequireDefault(_jscodeshift);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/*
 * Copyright (c) 2015-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the license found in the LICENSE file in
 * the root directory of this source tree.
 *
 * 
 */

var match = _jscodeshift2.default.match;

/**
 * This traverses a node to find the first identifier in nested expressions,
 * returning its name and parent node (if applicable).
 */

function getRootIdentifierInExpression(node, parent) {
  if (!node) {
    return null;
  }
  if (match(node, { type: 'ExpressionStatement' })) {
    return getRootIdentifierInExpression(node.expression, node);
  }
  if (match(node, { type: 'CallExpression' })) {
    return getRootIdentifierInExpression(node.callee, node);
  }
  if (match(node, { type: 'MemberExpression' })) {
    return getRootIdentifierInExpression(node.object, node);
  }
  if (match(node, { type: 'Identifier' })) {
    return { name: node.name, parent: parent };
  }
  return null;
}

module.exports = getRootIdentifierInExpression;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tb24vdXRpbHMvZ2V0Um9vdElkZW50aWZpZXJJbkV4cHJlc3Npb24uanMiXSwibmFtZXMiOlsibWF0Y2giLCJnZXRSb290SWRlbnRpZmllckluRXhwcmVzc2lvbiIsIm5vZGUiLCJwYXJlbnQiLCJ0eXBlIiwiZXhwcmVzc2lvbiIsImNhbGxlZSIsIm9iamVjdCIsIm5hbWUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQVlBOzs7Ozs7QUFaQTs7Ozs7Ozs7OztJQWNPQSxLLHlCQUFBQSxLOztBQUVQOzs7OztBQUlBLFNBQVNDLDZCQUFULENBQ0VDLElBREYsRUFFRUMsTUFGRixFQUdrQztBQUNoQyxNQUFJLENBQUNELElBQUwsRUFBVztBQUNULFdBQU8sSUFBUDtBQUNEO0FBQ0QsTUFBSUYsTUFBTUUsSUFBTixFQUFZLEVBQUNFLE1BQU0scUJBQVAsRUFBWixDQUFKLEVBQWdEO0FBQzlDLFdBQU9ILDhCQUE4QkMsS0FBS0csVUFBbkMsRUFBK0NILElBQS9DLENBQVA7QUFDRDtBQUNELE1BQUlGLE1BQU1FLElBQU4sRUFBWSxFQUFDRSxNQUFNLGdCQUFQLEVBQVosQ0FBSixFQUEyQztBQUN6QyxXQUFPSCw4QkFBOEJDLEtBQUtJLE1BQW5DLEVBQTJDSixJQUEzQyxDQUFQO0FBQ0Q7QUFDRCxNQUFJRixNQUFNRSxJQUFOLEVBQVksRUFBQ0UsTUFBTSxrQkFBUCxFQUFaLENBQUosRUFBNkM7QUFDM0MsV0FBT0gsOEJBQThCQyxLQUFLSyxNQUFuQyxFQUEyQ0wsSUFBM0MsQ0FBUDtBQUNEO0FBQ0QsTUFBSUYsTUFBTUUsSUFBTixFQUFZLEVBQUNFLE1BQU0sWUFBUCxFQUFaLENBQUosRUFBdUM7QUFDckMsV0FBTyxFQUFDSSxNQUFNTixLQUFLTSxJQUFaLEVBQWtCTCxjQUFsQixFQUFQO0FBQ0Q7QUFDRCxTQUFPLElBQVA7QUFDRDs7QUFFRE0sT0FBT0MsT0FBUCxHQUFpQlQsNkJBQWpCIiwiZmlsZSI6ImdldFJvb3RJZGVudGlmaWVySW5FeHByZXNzaW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBsaWNlbnNlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW5cbiAqIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93XG4gKi9cblxuaW1wb3J0IHR5cGUge05vZGV9IGZyb20gJy4uL3R5cGVzL2FzdCc7XG5cbmltcG9ydCBqc2NzIGZyb20gJ2pzY29kZXNoaWZ0JztcblxuY29uc3Qge21hdGNofSA9IGpzY3M7XG5cbi8qKlxuICogVGhpcyB0cmF2ZXJzZXMgYSBub2RlIHRvIGZpbmQgdGhlIGZpcnN0IGlkZW50aWZpZXIgaW4gbmVzdGVkIGV4cHJlc3Npb25zLFxuICogcmV0dXJuaW5nIGl0cyBuYW1lIGFuZCBwYXJlbnQgbm9kZSAoaWYgYXBwbGljYWJsZSkuXG4gKi9cbmZ1bmN0aW9uIGdldFJvb3RJZGVudGlmaWVySW5FeHByZXNzaW9uKFxuICBub2RlOiA/Tm9kZSxcbiAgcGFyZW50PzogTm9kZSxcbik6ID97bmFtZTogc3RyaW5nLCBwYXJlbnQ6ID9Ob2RlfSB7XG4gIGlmICghbm9kZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChtYXRjaChub2RlLCB7dHlwZTogJ0V4cHJlc3Npb25TdGF0ZW1lbnQnfSkpIHtcbiAgICByZXR1cm4gZ2V0Um9vdElkZW50aWZpZXJJbkV4cHJlc3Npb24obm9kZS5leHByZXNzaW9uLCBub2RlKTtcbiAgfVxuICBpZiAobWF0Y2gobm9kZSwge3R5cGU6ICdDYWxsRXhwcmVzc2lvbid9KSkge1xuICAgIHJldHVybiBnZXRSb290SWRlbnRpZmllckluRXhwcmVzc2lvbihub2RlLmNhbGxlZSwgbm9kZSk7XG4gIH1cbiAgaWYgKG1hdGNoKG5vZGUsIHt0eXBlOiAnTWVtYmVyRXhwcmVzc2lvbid9KSkge1xuICAgIHJldHVybiBnZXRSb290SWRlbnRpZmllckluRXhwcmVzc2lvbihub2RlLm9iamVjdCwgbm9kZSk7XG4gIH1cbiAgaWYgKG1hdGNoKG5vZGUsIHt0eXBlOiAnSWRlbnRpZmllcid9KSkge1xuICAgIHJldHVybiB7bmFtZTogbm9kZS5uYW1lLCBwYXJlbnR9O1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFJvb3RJZGVudGlmaWVySW5FeHByZXNzaW9uO1xuIl19