'use strict';

var _jscodeshift;

function _load_jscodeshift() {
  return _jscodeshift = _interopRequireDefault(require('jscodeshift'));
}

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/*
 * Copyright (c) 2015-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the license found in the LICENSE file in
 * the root directory of this source tree.
 *
 * 
 */

var match = (_jscodeshift || _load_jscodeshift()).default.match;

/**
 * This traverses a node to find the first identifier in nested expressions,
 * returning its name and parent node (if applicable).
 */


function getRootIdentifierInExpression(node, parent) {
  if (!node) {
    return null;
  }
  if (match(node, { type: 'ExpressionStatement' })) {
    return getRootIdentifierInExpression(node.expression, node);
  }
  if (match(node, { type: 'CallExpression' })) {
    return getRootIdentifierInExpression(node.callee, node);
  }
  if (match(node, { type: 'MemberExpression' })) {
    return getRootIdentifierInExpression(node.object, node);
  }
  if (match(node, { type: 'Identifier' })) {
    return { name: node.name, parent: parent };
  }
  return null;
}

module.exports = getRootIdentifierInExpression;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tb24vdXRpbHMvZ2V0Um9vdElkZW50aWZpZXJJbkV4cHJlc3Npb24uanMiXSwibmFtZXMiOlsibWF0Y2giLCJnZXRSb290SWRlbnRpZmllckluRXhwcmVzc2lvbiIsIm5vZGUiLCJwYXJlbnQiLCJ0eXBlIiwiZXhwcmVzc2lvbiIsImNhbGxlZSIsIm9iamVjdCIsIm5hbWUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7O0FBWUE7QUFBQTtBQUFBOzs7O0FBWkE7Ozs7Ozs7Ozs7SUFjT0EsSyxpREFBQUEsSzs7QUFFUDs7Ozs7O0FBSUEsU0FBU0MsNkJBQVQsQ0FDRUMsSUFERixFQUVFQyxNQUZGLEVBR2tDO0FBQ2hDLE1BQUksQ0FBQ0QsSUFBTCxFQUFXO0FBQ1QsV0FBTyxJQUFQO0FBQ0Q7QUFDRCxNQUFJRixNQUFNRSxJQUFOLEVBQVksRUFBQ0UsTUFBTSxxQkFBUCxFQUFaLENBQUosRUFBZ0Q7QUFDOUMsV0FBT0gsOEJBQThCQyxLQUFLRyxVQUFuQyxFQUErQ0gsSUFBL0MsQ0FBUDtBQUNEO0FBQ0QsTUFBSUYsTUFBTUUsSUFBTixFQUFZLEVBQUNFLE1BQU0sZ0JBQVAsRUFBWixDQUFKLEVBQTJDO0FBQ3pDLFdBQU9ILDhCQUE4QkMsS0FBS0ksTUFBbkMsRUFBMkNKLElBQTNDLENBQVA7QUFDRDtBQUNELE1BQUlGLE1BQU1FLElBQU4sRUFBWSxFQUFDRSxNQUFNLGtCQUFQLEVBQVosQ0FBSixFQUE2QztBQUMzQyxXQUFPSCw4QkFBOEJDLEtBQUtLLE1BQW5DLEVBQTJDTCxJQUEzQyxDQUFQO0FBQ0Q7QUFDRCxNQUFJRixNQUFNRSxJQUFOLEVBQVksRUFBQ0UsTUFBTSxZQUFQLEVBQVosQ0FBSixFQUF1QztBQUNyQyxXQUFPLEVBQUNJLE1BQU1OLEtBQUtNLElBQVosRUFBa0JMLGNBQWxCLEVBQVA7QUFDRDtBQUNELFNBQU8sSUFBUDtBQUNEOztBQUVETSxPQUFPQyxPQUFQLEdBQWlCVCw2QkFBakIiLCJmaWxlIjoiZ2V0Um9vdElkZW50aWZpZXJJbkV4cHJlc3Npb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIGxpY2Vuc2UgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpblxuICogdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqL1xuXG5pbXBvcnQgdHlwZSB7Tm9kZX0gZnJvbSAnLi4vdHlwZXMvYXN0JztcblxuaW1wb3J0IGpzY3MgZnJvbSAnanNjb2Rlc2hpZnQnO1xuXG5jb25zdCB7bWF0Y2h9ID0ganNjcztcblxuLyoqXG4gKiBUaGlzIHRyYXZlcnNlcyBhIG5vZGUgdG8gZmluZCB0aGUgZmlyc3QgaWRlbnRpZmllciBpbiBuZXN0ZWQgZXhwcmVzc2lvbnMsXG4gKiByZXR1cm5pbmcgaXRzIG5hbWUgYW5kIHBhcmVudCBub2RlIChpZiBhcHBsaWNhYmxlKS5cbiAqL1xuZnVuY3Rpb24gZ2V0Um9vdElkZW50aWZpZXJJbkV4cHJlc3Npb24oXG4gIG5vZGU6ID9Ob2RlLFxuICBwYXJlbnQ/OiBOb2RlLFxuKTogP3tuYW1lOiBzdHJpbmcsIHBhcmVudDogP05vZGV9IHtcbiAgaWYgKCFub2RlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKG1hdGNoKG5vZGUsIHt0eXBlOiAnRXhwcmVzc2lvblN0YXRlbWVudCd9KSkge1xuICAgIHJldHVybiBnZXRSb290SWRlbnRpZmllckluRXhwcmVzc2lvbihub2RlLmV4cHJlc3Npb24sIG5vZGUpO1xuICB9XG4gIGlmIChtYXRjaChub2RlLCB7dHlwZTogJ0NhbGxFeHByZXNzaW9uJ30pKSB7XG4gICAgcmV0dXJuIGdldFJvb3RJZGVudGlmaWVySW5FeHByZXNzaW9uKG5vZGUuY2FsbGVlLCBub2RlKTtcbiAgfVxuICBpZiAobWF0Y2gobm9kZSwge3R5cGU6ICdNZW1iZXJFeHByZXNzaW9uJ30pKSB7XG4gICAgcmV0dXJuIGdldFJvb3RJZGVudGlmaWVySW5FeHByZXNzaW9uKG5vZGUub2JqZWN0LCBub2RlKTtcbiAgfVxuICBpZiAobWF0Y2gobm9kZSwge3R5cGU6ICdJZGVudGlmaWVyJ30pKSB7XG4gICAgcmV0dXJuIHtuYW1lOiBub2RlLm5hbWUsIHBhcmVudH07XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0Um9vdElkZW50aWZpZXJJbkV4cHJlc3Npb247XG4iXX0=